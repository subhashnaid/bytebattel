<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeChallenge - Coding Platform</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.min.js"></script>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">Byte Battle</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showFeed()">Problems</a></li>
                <li><a href="#" onclick="showProfile()" id="profile-link" class="hidden">Profile</a></li>
            </ul>
            <div class="auth-buttons">
                <button class="btn btn-secondary" onclick="showLogin()" id="login-btn">Login</button>
                <button class="btn btn-primary" onclick="showSignup()" id="signup-btn">Sign Up</button>
                <button class="btn btn-secondary hidden" onclick="logout()" id="logout-btn">Logout</button>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="container hero-inner">
                <img src="assets/byte-battle-hero.png" alt="Byte Battle" class="hero-logo" onerror="this.classList.add('hidden')">
                <h1 class="hero-title">BYTE BATTLE</h1>
                <p class="hero-tagline">Challenge the Code. Master the Art.</p>
            </div>
        </section>
        <!-- Login Form -->
        <div id="login-page" class="auth-container">
            <form class="auth-form" onsubmit="handleLogin(event)">
                <h2 style="text-align: center; margin-bottom: 2rem;">Login</h2>
                <button type="button" class="google-btn" onclick="loginWithGoogle()">
                    Continue with Google
                </button>
                <div style="text-align: center; margin: 1rem 0;">or</div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                <p style="text-align: center; margin-top: 1rem;">
                    Don't have an account? <a href="#" onclick="showSignup()">Sign up</a>
                </p>
            </form>
        </div>

        <!-- Signup Form -->
        <div id="signup-page" class="auth-container hidden">
            <form class="auth-form" onsubmit="handleSignup(event)">
                <h2 style="text-align: center; margin-bottom: 2rem;">Sign Up</h2>
                <button type="button" class="google-btn" onclick="signupWithGoogle()">
                    Sign up with Google
                </button>
                <div style="text-align: center; margin: 1rem 0;">or</div>
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="signup-name" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="signup-email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="signup-password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign Up</button>
                <p style="text-align: center; margin-top: 1rem;">
                    Already have an account? <a href="#" onclick="showLogin()">Login</a>
                </p>
            </form>
        </div>

        <!-- Feed -->
        <div id="feed-page" class="feed-container container hidden">
            <div class="feed-header">
                <h1>Coding Problems</h1>
                <button class="btn btn-primary create-problem-btn" onclick="showCreateProblem()">
                    Create Problem
                </button>
            </div>
            
            <!-- Search and Filter Controls -->
            <div class="feed-controls">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="Search problems..." onkeyup="filterProblems()">
                    <span class="search-icon">üîç</span>
                </div>
                <div class="filter-controls">
                    <select id="difficulty-filter" onchange="filterProblems()">
                        <option value="">All Difficulties</option>
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                    <select id="sort-filter" onchange="filterProblems()">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="most-liked">Most Liked</option>
                        <option value="alphabetical">A-Z</option>
                    </select>
                </div>
            </div>
            
            <div class="problems-grid" id="problems-grid">
                <!-- Problems will be loaded here -->
            </div>
        </div>

        <!-- Create Problem -->
        <div id="create-problem-page" class="container hidden" style="padding: 2rem 0;">
            <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <h2>Create New Problem</h2>
                <form onsubmit="handleCreateProblem(event)" style="margin-top: 2rem;">
                    <div class="form-group">
                        <label>Problem Title</label>
                        <input type="text" id="problem-title" required>
                    </div>
                    <div class="form-group">
                        <label>Difficulty</label>
                        <select id="problem-difficulty" required>
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Tags (comma separated)</label>
                        <input type="text" id="problem-tags" placeholder="arrays, strings, dynamic-programming">
                    </div>
                    <div class="form-group">
                        <label>Problem Statement</label>
                        <textarea id="problem-statement" rows="10" required 
                                placeholder="Describe the problem, constraints, and requirements..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Sample Input</label>
                        <textarea id="sample-input" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Sample Output</label>
                        <textarea id="sample-output" rows="3" required></textarea>
                    </div>
                    <div style="display: flex; gap: 1rem;">
                        <button type="submit" class="btn btn-primary">Create Problem</button>
                        <button type="button" class="btn btn-secondary" onclick="showFeed()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Problem Detail -->
        <div id="problem-page" class="problem-detail container hidden">
            <div class="problem-header">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div>
                        <h1 id="problem-detail-title">Problem Title</h1>
                        <div class="problem-meta" id="problem-detail-meta">
                            <!-- Meta info will be inserted here -->
                        </div>
                    </div>
                    <button class="like-btn" id="problem-like-btn" onclick="toggleProblemLike()">
                        ‚ù§Ô∏è <span id="problem-likes">0</span>
                    </button>
                </div>
            </div>

            <div class="problem-content">
                <div class="problem-statement">
                    <h3>Problem Statement</h3>
                    <div id="problem-detail-statement">
                        <!-- Problem statement will be inserted here -->
                    </div>
                    <h3 style="margin-top: 2rem;">Sample Input/Output</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div>
                            <h4>Input:</h4>
                            <pre id="sample-input-display" style="background: #f8f9fa; padding: 1rem; border-radius: 5px;"></pre>
                        </div>
                        <div>
                            <h4>Output:</h4>
                            <pre id="sample-output-display" style="background: #f8f9fa; padding: 1rem; border-radius: 5px;"></pre>
                        </div>
                    </div>
                </div>

                <div class="code-section">
                    <div class="code-header">
                        <span>Solution</span>
                        <select class="language-select" id="language-select" onchange="changeLanguage()">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="java">Java</option>
                            <option value="cpp">C++</option>
                        </select>
                    </div>
                    <div class="code-editor" id="code-editor"></div>
                    <div class="code-actions">
                        <button class="btn run-btn" onclick="runCode()">Run</button>
                        <button class="btn submit-btn" onclick="submitSolution()">Submit</button>
                    </div>
                </div>
            </div>

            <div class="result-panel hidden" id="result-panel">
                <h4 id="result-title">Result</h4>
                <div id="result-content"></div>
            </div>

            <div class="solutions-section">
                <h3>Accepted Solutions</h3>
                <div id="solutions-list">
                    <!-- Solutions will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profile-page" class="profile-container container hidden">
            <div class="profile-header">
                <div class="profile-info">
                    <div class="profile-avatar" id="profile-avatar">U</div>
                    <div class="profile-details">
                        <h2 id="profile-name">User Name</h2>
                        <p id="profile-bio">Bio will appear here</p>
                        <div class="tags" id="profile-skills">
                            <!-- Skills will be displayed here -->
                        </div>
                        <div class="profile-stats">
                            <div class="stat">
                                <div class="stat-number" id="problems-solved">0</div>
                                <div>Problems Solved</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number" id="total-score">0</div>
                                <div>Total Score</div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="showEditProfile()">Edit Profile</button>
            </div>
        </div>

        <!-- Edit Profile -->
        <div id="edit-profile-page" class="auth-container hidden">
            <form class="auth-form" onsubmit="handleUpdateProfile(event)" style="max-width: 500px;">
                <h2 style="text-align: center; margin-bottom: 2rem;">Edit Profile</h2>
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="edit-name" required>
                </div>
                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="edit-bio" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Skills (comma separated)</label>
                    <input type="text" id="edit-skills" placeholder="JavaScript, Python, Algorithms">
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">Update Profile</button>
                    <button type="button" class="btn btn-secondary" onclick="showProfile()" style="flex: 1;">Cancel</button>
                </div>
            </form>
        </div>
    </main>

    <script src="api.js"></script>
    <script src="app.js"></script>
</body>
</html>